<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cadeados - Desbloqueio por Senha</title>
  <style>
    :root{
      --bg:#0f1720;
      --card:#0b1220;
      --accent:#4ade80;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:
        radial-gradient(800px 400px at 10% 10%, rgba(58,89,255,0.06), transparent 10%),
        linear-gradient(180deg,#071026 0%, #071225 60%);
      color:#e6eef8;
      padding:32px;
    }
    .wrap{
      width:100%;
      max-width:980px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:28px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:18px;
    }
    header h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    .controls{
      display:flex;
      gap:10px;
      align-items:center;
    }
    button.btn{
      background:var(--glass);
      border:1px solid rgba(255,255,255,0.04);
      color:var(--muted);
      padding:8px 12px;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(190px,1fr));
      gap:16px;
    }
    .lock{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      border-radius:12px;
      padding:18px;
      text-align:center;
      border:1px solid rgba(255,255,255,0.03);
      position:relative;
      min-height:220px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:12px;
    }
    .lock h2{margin:0;font-size:15px;color:var(--muted)}
    .padlock{
      width:84px;
      height:84px;
      margin:6px auto 0;
      position:relative;
    }
    /* shackle */
    .shackle{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:0;
      width:62px;
      height:50px;
      border-radius:40px 40px 0 0;
      border:8px solid #c7dde8;
      border-bottom:0;
      transition: transform 600ms cubic-bezier(.2,.9,.3,1), top 600ms, opacity 300ms;
      transform-origin:50% 26px;
      background:transparent;
    }
    /* body */
    .body{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:8px;
      width:72px;
      height:64px;
      border-radius:8px;
      background:linear-gradient(180deg,#e6f2ff 0,#cfe7ff 100%);
      box-shadow: inset 0 -8px 18px rgba(0,0,0,0.12);
      border:2px solid rgba(0,0,0,0.06);
    }
    .body.locked{ background: linear-gradient(180deg,#e6f2ff 0,#cfe7ff 100%); }
    .body.unlocked{ background: linear-gradient(180deg,#eafaf1 0,#cfffe0 100%); }
    /* open state */
    .open .shackle{
      transform: translateX(-50%) rotate(-58deg) translateY(-6px);
      top:-6px;
      opacity:1;
    }

    .controls-inline{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:center;
    }
    input[type="password"]{
      width:100%;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background: rgba(255,255,255,0.02);
      color:inherit;
      outline:none;
      font-size:14px;
    }
    .btn-try{
      padding:8px 10px;
      border-radius:8px;
      border:0;
      background:linear-gradient(90deg,var(--accent),#16a34a);
      color:#062014;
      font-weight:700;
      cursor:pointer;
    }
    .status{
      font-size:13px;
      color:var(--muted);
      margin-top:6px;
      min-height:18px;
    }
    .status.success{ color: #22c55e; font-weight:700; }
    .status.fail{ color:#fb7185; font-weight:700; }
    footer{
      margin-top:18px;
      font-size:13px;
      color:var(--muted);
      text-align:right;
    }

    @media (max-width:560px){
      .padlock{ width:72px;height:72px;}
      .shackle{ width:52px;height:42px;border-width:7px;}
      .body{ width:64px;height:56px;}
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <h1>5 Cadeados — Digite a senha para destravar</h1>
      <div class="controls">
        <button class="btn" id="btn-show">Mostrar Senhas</button>
        <button class="btn" id="btn-reset">Resetar</button>
      </div>
    </header>

    <div class="grid" id="grid">
      <!-- locks generated by JS -->
    </div>

    <footer>As senhas são numéricas de 4 dígitos. Estado salvo localmente no navegador.</footer>
  </div>

  <script>
    // Senhas fornecidas (exemplo do usuário)
    const PASSWORDS = {
      1: "3434",
      2: "5412",
      3: "1852",
      4: "9876",
      5: "2348"
    };

    const grid = document.getElementById('grid');
    const STORAGE_KEY = 'cadeados_estado_v1';

    // recupera estado salvo (obj com chaves 1..5 = true/false)
    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return {};
        return JSON.parse(raw) || {};
      }catch(e){
        console.warn('Erro lendo storage', e);
        return {};
      }
    }
    function saveState(state){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
      catch(e){ console.warn('Não foi possível salvar estado', e); }
    }

    let state = loadState();

    // Cria cartões de cadeado
    for(let i=1;i<=5;i++){
      const card = document.createElement('div');
      card.className = 'lock';
      card.setAttribute('data-id', i);

      card.innerHTML = `
        <h2>Cadeado ${i}</h2>
        <div class="padlock" aria-hidden="true">
          <div class="shackle"></div>
          <div class="body ${state[i] ? 'unlocked' : 'locked'}"></div>
        </div>
        <div>
          <div class="controls-inline">
            <input type="password" inputmode="numeric" maxlength="6" placeholder="Senha (4 dígitos)" aria-label="Senha do cadeado ${i}">
            <button class="btn-try">Destravar</button>
          </div>
          <div class="status" aria-live="polite"></div>
        </div>
      `;

      grid.appendChild(card);

      const input = card.querySelector('input');
      const tryBtn = card.querySelector('.btn-try');
      const status = card.querySelector('.status');
      const padlock = card.querySelector('.padlock');

      // aplicar estado inicial
      if(state[i]){
        card.classList.add('open');
        status.textContent = 'Destravado';
        status.classList.add('success');
      }

      tryBtn.addEventListener('click', ()=> attemptUnlock(i, input.value.trim(), card, status, padlock, input));
      input.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter') tryBtn.click();
      });
    }

    // Função que tenta destravar
    function attemptUnlock(id, attempt, card, status, padlock, input){
      if(!attempt){
        status.textContent = 'Digite a senha';
        status.className='status fail';
        return;
      }
      // só aceitamos números (senha são numéricas)
      if(!/^\d{4,6}$/.test(attempt)){
        status.textContent = 'Formato inválido (use 4 dígitos)';
        status.className='status fail';
        return;
      }
      const correct = PASSWORDS[id];
      // comparação exata
      if(attempt === correct){
        // sucesso
        status.textContent = 'Senha correta — Destravado!';
        status.className='status success';
        card.classList.add('open');
        // muda cor do corpo do cadeado
        const body = card.querySelector('.body');
        body.classList.remove('locked');
        body.classList.add('unlocked');
        // salva estado
        state[id] = true;
        saveState(state);
        input.value = '';
      } else {
        // falha
        status.textContent = 'Senha incorreta';
        status.className='status fail';
      }
    }

    // botões superiores
    document.getElementById('btn-reset').addEventListener('click', ()=>{
      if(!confirm('Deseja realmente resetar todos os cadeados?')) return;
      state = {};
      saveState(state);
      // atualizar UI
      document.querySelectorAll('.lock').forEach(card=>{
        card.classList.remove('open');
        const status = card.querySelector('.status');
        status.textContent = '';
        status.className = 'status';
        const body = card.querySelector('.body');
        body.classList.remove('unlocked');
        body.classList.add('locked');
      });
    });

    // mostrar senhas (útil para testes). botão alterna.
    const btnShow = document.getElementById('btn-show');
    let revealed = false;
    btnShow.addEventListener('click', ()=>{
      revealed = !revealed;
      if(revealed){
        // mostra tabela simples em modal leve
        const lines = Object.keys(PASSWORDS).map(k=>`Cadeado ${k}: ${PASSWORDS[k]}`).join('\\n');
        alert('Senhas (apenas para teste):\\n\\n' + lines);
        btnShow.textContent = 'Ocultar Senhas';
      } else {
        btnShow.textContent = 'Mostrar Senhas';
      }
    });
  </script>
</body>
</html>
